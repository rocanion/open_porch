= content_for :head do
  = javascript_include_tag "http://maps.google.com/maps/api/js?sensor=false"
  = javascript_include_tag 'google_maps'


= content_for :doc_ready do
  initialize(document.getElementById("map_canvas"), #{@address.location.lat}, #{@address.location.lng});
  center_marker = add_marker(#{@address.location.lat}, #{@address.location.lng}, '#{@address.full}');
  add_region([#{@selected_area.border_coordinates}], 'selected')
  - @areas.each do |area|
    add_region([#{area.border_coordinates}])

.tabbed
  %ul.tabs
    %li.active 1. Confirm neighborhood
    %li 2. Account details
    %li 3. Sign up complete
  .clear.whitebox.padded
    .left
      %h2 Enter your account details
      %h3 #{@address.address} is currently in: <strong>#{@selected_area.name}</strong>
      %ul.list
        - @areas.each_with_index do |area, i|
          %li
            .name #{i+1}) #{area.name}
            .action
              = link_to 'View info', ''
              |
              = link_to 'Select this one', ''

      = form_for @user, :url => registrations_path do |f|
        = f.hidden_field :address
        = f.hidden_field :city
        = f.hidden_field :state
        = f.select :area_id, ([@selected_area]+@areas).collect{|a| [a.name, a.id]}
        = f.submit 'Sign Up'

    .right        
      #map_canvas{:style => 'width:400px; height:400px'}