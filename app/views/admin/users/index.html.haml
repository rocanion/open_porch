.columns
  %h2 Users
  = link_to 'Add new user', new_admin_user_path
  = will_paginate @users
  = form_for @search, :url => [:admin, :users], :html => {:method => :get} do |f|
    = f.label :email_or_name_or_address_search, 'Search'
    = f.text_field :email_or_name_or_address_search, :style => 'width: 150px'
    = f.select :role_equals, User.roles_for_select, :include_blank => 'All Roles'
    = f.submit 'Find'

  %table
    %tr
      %th= sort_link @search, :last_name_and_first_name, 'Name'
      %th Email
      %th= sort_link @search, :role
      %th= sort_link @search, :created_at
      %th
      
    - @users.each do |user|
      %tr
        %td= link_to user.full_name, [:edit, :admin, user]
        %td= user.email
        %td= user.role.humanize
        %td= user.created_at
        %td
          = link_to 'delete', admin_user_path(user), :method => :delete, :confirm => 'Are you sure you want to delete this user?'
          
  = will_paginate @users
